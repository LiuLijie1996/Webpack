### 安装

```
npm install mini-css-extract-plugin -D
	将css代码装在文件中

npm install optimize-css-assets-webpack-plugin -D
	压缩打包后的css代码
	
npm install html-webpack-plugin -D
	用来生成html文件的
```



### webpack.config.js配置

```js
let path = require("path");

//将css代码装在文件中
let MiniCssExtractPlugin = require("mini-css-extract-plugin");
//压缩打包后的css代码
let OptimizeCssAssetsPlugin = require("optimize-css-assets-webpack-plugin");
//基本作用就是生成html文件
let HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
    //code...

    //处理非js之外的文件
    module: {
        rules: [
            {
                test: /\.(css|less)$/,//匹配到css结尾的文件
                //如果插件不需要配置,可以用这种写法
                use: [
                    /*
                    * 如果想要把打包好的css放在文件中,就不能使用style-loader了
                    * 因为style-loader是把css放在标签中插入到head标签中的
                    * */
                    // 'style-loader',

                    MiniCssExtractPlugin.loader,
                    'css-loader',
                    'less-loader',
                    'postcss-loader'
                ],
            },
        ]
    },

    //用来拓展webpack功能
    plugins:[
        //将打包好的css代码放在文件中
        new MiniCssExtractPlugin({
            //设置打包后的css文件存放的文件夹和名字
            filename:"css/[name].css"
        }),

        //压缩打包后的css代码
        new OptimizeCssAssetsPlugin(),

        new HtmlWebpackPlugin({
            //模板文件
            template: "./src/template.html",
            //打包后文件的名字
            filename: "index.html",
            //取消自动引入 js,css 文件功能
            inject:false,
            //压缩工具
            minify: {
                //清理html中的空格、换行符
                collapseWhitespaceL:true,

                //去掉注释
                removeComments : true,

                //删除script的类型属性，在h5下面script的type默认值：text/javascript 默认值false
                removeScriptTypeAttributes: true,

                //删除style的类型属性， type="text/css" 同上
                removeStyleLinkTypeAttributes: true,

                //使用短的文档类型，默认false
                useShortDoctype: true,

                //是否对大小写敏感，默认false
                caseSensitive: true,

                //是否简写boolean格式的属性如：disabled="disabled" 简写为disabled  默认false
                collapseBooleanAttributes: true,

                //是否去除空格，默认false
                collapseWhitespace: true,

                //是否压缩html里的css（使用clean-css进行的压缩） 默认值false；
                minifyCSS: true,

                //是否压缩html里的js（使用uglify-js进行的压缩）
                minifyJS: true,

                //防止转义属性值
                preventAttributesEscaping: true,

                //是否移除属性的引号 默认false
                removeAttributeQuotes: true,

                //从脚本和样式删除的注释 默认false
                removeCommentsFromCDATA: true,

                //是否删除空属性，默认false
                removeEmptyAttributes: true,

                //  若开启此项，生成的html中没有 body 和 head，html也未闭合
                removeOptionalTags: false,

                //删除多余的属性
                removeRedundantAttributes: true,
            }
        }),
    ]
};
```

